# Участники проекта
> Тимчишина Анастасия 5130904/30101

> Дорошенко Анна 5130904/30101

> Хомиченко Алиса 5130904/30101

> Жирков Владимир 5130904/30101

> Ковшиков Никита 5130904/30101

# ИИ-агент с векторной базой, где храниться документация СПбПУ

> В рамках проекта разрабатывается веб-приложение с интеллектуальным агентом, предназначенное для поиска и предоставления информации на основе документации университета. Система использует векторную базу данных для хранения и поиска фрагментов документов и обеспечивает взаимодействие с пользователем через веб-интерфейс в формате диалога.

> Основной целью системы является упрощение и ускорение процесса получения актуальной информации из официальных документов университета.

## Определение проблемы

> Студентам и преподавателям сложно находить в документации политеха необходимую для себя информацию. Пользователи вынуждены вручную заходить заходить на сайт политеха, искать файл, где хранятся материалы. Это неудобно и увеличивает вероятность не найти информацию или пропустить изменения в регламентах.

## Выработĸа требований

###  Поиск информации в документации университета

#### Описание сценария:

> Пользователь формулирует вопрос на естественном языке и отправляет его через веб-интерфейс. Система обрабатывает запрос, выполняет поиск релевантной информации во векторной базе данных и формирует ответ с использованием ИИ-агента.

#### Требования:

>Система должна предоставлять пользователю возможность ввода текстового запроса.

>Система должна выполнять поиск информации на основе векторного представления документов.

>Система должна формировать ответ на естественном языке.

>Система должна отображать ответ пользователю в виде сообщения в чате.

### Использование актуальной версии документации

#### Описание сценария:
> Пользователь получает ответы, основанные на актуальной документации университета.

#### Требования:

> Векторная база данных должна формироваться на основе актуальных документов.

> Система должна обеспечивать возможность обновления и переиндексации базы данных при изменении документации.

> Ответы системы не должны выходить за рамки предоставленных документов.

### Веб-интерфейс пользователя
#### Описание сценария:
> Пользователь взаимодействует с системой через веб-приложение, реализованное в формате диалогового интерфейса.

#### Требования:
> Веб-интерфейс должен содержать поле ввода пользовательского запроса.

> Интерфейс должен отображать историю диалога.

> Интерфейс должен быть интуитивно понятным и не требовать специального обучения.

## Архитектура системы
### Frontend

> Веб-клиент, реализующий пользовательский интерфейс в формате диалога. Фронтенд-приложение разработано с использованием Next.js

### Backend
> Cерверная часть приложения, реализованная с использованием фреймворка Django на языке Python

### Оркестрационный слой
> Реализован с использованием платформы автоматизации n8n. Данный слой отвечает за обработку пользовательских запросов, выполнение сценариев поиска по векторной базе данных, а также интеграцию с внешним ИИ-сервисом. Взаимодействие осуществляется по HTTP
<img width="1239" height="654" alt="image" src="https://github.com/user-attachments/assets/2d915153-79d4-4da5-9cc3-91f9f2cf55d3" />

### Векторная база данных документации
> Реализована в виде отдельного сценария (workflow) в n8n
<img width="1016" height="820" alt="image" src="https://github.com/user-attachments/assets/9feb8d47-a845-4367-ae28-d67f77f67890" />

### Внешний сервис
> ChatGPT. Используется для генерации текстовых ответов на основе контекста, полученного в результате поиска во векторной базе данных.

## Характер нагрузки на сервис
> Нагрузка на систему носит преимущественно читающий характер (Read-heavy), так как основная операция — получение информации из документации.

### Соотношение R/W нагрузки
> Read (R) — ~90%. Поиск информации во векторной базе и формирование ответов.

> Write (W) — ~10%. Загрузка и обновление документации, переиндексация базы данных.

## Контракты API
> Серверная часть предоставляет один основной эндпоинт для передачи пользовательских сообщений в систему.
### Endpoint:
> POST /v1/chat/message/

#### Формат запроса:
> chat_id — идентификатор диалога

> message — текст пользовательского сообщения

#### Формат ответа:
> status — статус обработки запроса

> answer — сгенерированный ответ

### Передача пользовательского сообщения в рамках диалога с ИИ-агентом


## Информация о пользовании ИИ-агента


## Запуск backend:

Копируем .env.example, создаем секретный ключ и заполняем поле DJANGO_SECRET_KEY:

> cp backend/.env.example backend/.env

### делать из-под папки backend:

Установка зависимостей:

> python -m venv venv

> source venv/bin/activate

> pip install -r requirements.txt


Применяем миграции, собираем статику:

> python src/manage.py migrate

> python src/manage.py collectstatic


Путь к wsgi-приложению: core.wsgi:application 


запуск в режиме разработки:

> python src/manage.py runserver




## Запуск frontend:


Копируем .env.example и заполняем поле NEXT_PUBLIC_API_URL, указывая путь к бекенду

> cp frontend/.env.example frontend/.env


### делать из-под папки frontend:

запуск production:

Установка:

> npm install

> npm run build


Запуск:

> npm run start


запуск dev:

Установка:

> npm install


Запуск:

> npm run dev

## Демонстрация работы веб-приложения
> Главное меню
<img width="1280" height="607" alt="image" src="https://github.com/user-attachments/assets/b070e06e-b1e2-469d-ab3b-e58a43d71017" />

> Создание нового чата

<img width="1280" height="609" alt="image" src="https://github.com/user-attachments/assets/018bd5fe-6f0d-4d8a-b1ab-650f74e37b30" />

> Новый чат создан

<img width="1280" height="608" alt="image" src="https://github.com/user-attachments/assets/7b837688-897e-4bae-82c8-13ec77eabca8" />

> Демонстрация работы

<img width="1280" height="605" alt="image" src="https://github.com/user-attachments/assets/7d77d5c3-6d90-4b2a-8418-74fcbb8f622e" />

<img width="1280" height="605" alt="image" src="https://github.com/user-attachments/assets/8669c1d0-06a3-40f2-98e0-b2859877dc3b" />

<img width="1280" height="606" alt="image" src="https://github.com/user-attachments/assets/79602ac4-27af-4f01-8866-ece3a52984d2" />

<img width="1280" height="604" alt="image" src="https://github.com/user-attachments/assets/fea72aca-e3d8-4984-91a1-9718a8f51d22" />

<img width="1280" height="605" alt="image" src="https://github.com/user-attachments/assets/3bbc22cd-9842-46a3-afec-777e96f6e7d1" />

